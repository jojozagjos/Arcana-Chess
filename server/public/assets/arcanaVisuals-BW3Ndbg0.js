import{r as d,u as j,j as e,A as te,M as A,V as D,S as se,O as re,C as ie,s as I}from"./index-EQhxtwfk.js";const R=new re,F=new ie;function $({count:r=100,config:t={},position:o=[0,0,0],onComplete:h}){const n=d.useRef(),l=d.useRef([]),[m,c]=d.useState(!1),{emitOnce:s=!0,emitRate:f=50,lifetime:i=[.5,1.5],spawnShape:a="point",spawnRadius:u=.5,spawnBox:p=[1,1,1],velocity:x=[0,1,0],velocitySpread:M=[.5,.5,.5],radialVelocity:y=0,gravity:v=[0,-2,0],drag:G=0,sizeStart:E=.1,sizeEnd:H=0,sizeVariance:J=.02,colorStart:_="#ffffff",colorEnd:K="#ffffff",emissive:N="#ffffff",emissiveIntensity:Q=2,opacityStart:X=1,opacityEnd:Y=0,rotationSpeed:Z=0,blending:L=te,depthWrite:O=!1}=t;d.useEffect(()=>{const T=[];for(let P=0;P<r;P++)T.push({position:new D,velocity:new D,age:s?0:-Math.random()*(r/f),maxAge:A.randFloat(i[0],i[1]),size:E+(Math.random()-.5)*J*2,rotation:Math.random()*Math.PI*2,alive:s}),s&&U(T[P],{spawnShape:a,spawnRadius:u,spawnBox:p,velocity:x,velocitySpread:M,radialVelocity:y});l.current=T},[r]);const z=d.useMemo(()=>new se(1,8,8),[]);return d.useEffect(()=>()=>{z&&z.dispose()},[z]),j((T,P)=>{if(!n.current||m)return;const C=l.current;let V=0,B=0;const q=s?0:Math.floor(f*P*2);for(let W=0;W<C.length;W++){const g=C[W];if(!s&&!g.alive&&B<q&&(g.alive=!0,g.age=0,g.maxAge=A.randFloat(i[0],i[1]),U(g,{spawnShape:a,spawnRadius:u,spawnBox:p,velocity:x,velocitySpread:M,radialVelocity:y}),B++),!g.alive){R.scale.set(0,0,0),R.updateMatrix(),n.current.setMatrixAt(W,R.matrix);continue}if(g.age+=P,g.age>=g.maxAge){g.alive=!1,R.scale.set(0,0,0),R.updateMatrix(),n.current.setMatrixAt(W,R.matrix);continue}V++;const w=g.age/g.maxAge;g.velocity.x+=v[0]*P,g.velocity.y+=v[1]*P,g.velocity.z+=v[2]*P,G>0&&g.velocity.multiplyScalar(1-G*P),g.position.x+=g.velocity.x*P,g.position.y+=g.velocity.y*P,g.position.z+=g.velocity.z*P,g.rotation+=Z*P;const k=A.lerp(E,H,ne(w))*g.size/E;R.position.copy(g.position),R.scale.set(k,k,k),R.rotation.z=g.rotation,R.updateMatrix(),n.current.setMatrixAt(W,R.matrix);const ee=A.lerp(X,Y,w);F.set(_).lerp(F.set(K),w),F.multiplyScalar(ee),n.current.setColorAt(W,F)}n.current.instanceMatrix.needsUpdate=!0,n.current.instanceColor&&(n.current.instanceColor.needsUpdate=!0),s&&V===0&&!m&&(c(!0),h==null||h())}),m?null:e.jsx("group",{position:o,children:e.jsx("instancedMesh",{ref:n,args:[z,void 0,r],frustumCulled:!1,children:e.jsx("meshStandardMaterial",{emissive:N,emissiveIntensity:Q,color:_,transparent:!0,opacity:1,blending:L,depthWrite:O,toneMapped:!1})})})}function U(r,t){const{spawnShape:o,spawnRadius:h,spawnBox:n,velocity:l,velocitySpread:m,radialVelocity:c}=t;switch(o){case"sphere":{const s=Math.random()*Math.PI*2,f=Math.acos(2*Math.random()-1),i=Math.cbrt(Math.random())*h;r.position.set(i*Math.sin(f)*Math.cos(s),i*Math.sin(f)*Math.sin(s),i*Math.cos(f));break}case"ring":{const s=Math.random()*Math.PI*2;r.position.set(Math.cos(s)*h,0,Math.sin(s)*h);break}case"box":{r.position.set((Math.random()-.5)*n[0],(Math.random()-.5)*n[1],(Math.random()-.5)*n[2]);break}default:r.position.set(0,0,0)}if(r.velocity.set(l[0]+(Math.random()-.5)*m[0]*2,l[1]+(Math.random()-.5)*m[1]*2,l[2]+(Math.random()-.5)*m[2]*2),c!==0){const s=r.position.clone().normalize();s.length()<.001&&s.set(Math.random()-.5,Math.random()-.5,Math.random()-.5).normalize(),r.velocity.add(s.multiplyScalar(c))}}const ne=r=>1-Math.pow(1-r,3);function ae({position:r=[0,0,0],count:t=60,color:o="#4fc3f7",radius:h=.45}){const n=d.useRef();return j(l=>{n.current&&(n.current.rotation.y=l.clock.elapsedTime*.8)}),e.jsx("group",{ref:n,position:r,children:e.jsx($,{count:t,config:{emitOnce:!1,emitRate:20,lifetime:[1,2],spawnShape:"ring",spawnRadius:h,velocity:[0,.5,0],velocitySpread:[.1,.1,.1],gravity:[0,0,0],sizeStart:.03,sizeEnd:.01,colorStart:o,colorEnd:"#e1f5fe",emissive:o,emissiveIntensity:4,opacityStart:.9,opacityEnd:0}})})}function oe({position:r=[0,0,0],count:t=40,color:o="#76ff03",intensity:h=1}){return e.jsx($,{position:r,count:t,config:{emitOnce:!1,emitRate:15*h,lifetime:[.8,1.5],spawnShape:"ring",spawnRadius:.3,velocity:[0,-.3,0],velocitySpread:[.2,.1,.2],gravity:[0,-1,0],sizeStart:.04,sizeEnd:.06,colorStart:o,colorEnd:"#b2ff59",emissive:o,emissiveIntensity:2*h,opacityStart:.7,opacityEnd:0}})}const b=r=>1-Math.pow(1-r,3),ce=r=>{const t=2*Math.PI/3;return r===0?0:r===1?1:Math.pow(2,-10*r)*Math.sin((r*10-.75)*t)+1};function S(r,t=400){const[o,h]=d.useState(!1),[n,l]=d.useState(0),[m,c]=d.useState(!1),s=d.useRef(!1);return d.useEffect(()=>{if(!o)return;let f=null,i=null;const a=u=>{i||(i=u);const p=u-i,x=Math.min(p/t,1);l(x),x<1?f=requestAnimationFrame(a):(s.current||(s.current=!0,r&&r()),c(!0))};return f=requestAnimationFrame(a),()=>{f&&cancelAnimationFrame(f)}},[o,t,r]),{finishing:o,finishT:n,completed:m,triggerFinish:()=>h(!0)}}function pe({square:r,fadeOpacity:t=1}){if(!r)return null;const[o,,h]=I(r),n=d.useRef(),l=d.useRef(),m=d.useRef(),c=d.useRef(),s=d.useMemo(()=>[...Array(6)].map((f,i)=>{const a=i/6*Math.PI*2;return[Math.cos(a)*.4,.5,Math.sin(a)*.4]}),[]);return j(f=>{const i=f.clock.elapsedTime;if(n.current&&(n.current.rotation.y=i*.5),l.current){const a=Math.sin(i*4)*.08+1;l.current.scale.set(a,1,a),l.current.material.opacity=(.3+Math.sin(i*3)*.1)*t}m.current&&(m.current.rotation.y=-i*.3,m.current.material.opacity=(.15+Math.sin(i*2)*.05)*t),c.current&&c.current.children.forEach((a,u)=>{const p=u/6*Math.PI*2;a.position.y=.5+Math.sin(i*2+p)*.1,a.material.opacity=(.6+Math.sin(i*3+p)*.3)*t})}),e.jsxs("group",{position:[o,0,h],ref:n,children:[e.jsxs("mesh",{ref:l,position:[0,.5,0],children:[e.jsx("cylinderGeometry",{args:[.45,.45,1,32,1,!0]}),e.jsx("meshStandardMaterial",{emissive:"#4fc3f7",emissiveIntensity:2.5,color:"#81d4fa",transparent:!0,depthWrite:!1,opacity:.35*t})]}),e.jsxs("mesh",{ref:m,position:[0,.5,0],children:[e.jsx("cylinderGeometry",{args:[.55,.55,.9,6,1,!0]}),e.jsx("meshStandardMaterial",{emissive:"#29b6f6",emissiveIntensity:1.5,color:"#4fc3f7",transparent:!0,depthWrite:!1,opacity:.2*t,wireframe:!0})]}),e.jsx("group",{ref:c,children:s.map((f,i)=>e.jsxs("mesh",{position:f,children:[e.jsx("octahedronGeometry",{args:[.08,0]}),e.jsx("meshStandardMaterial",{emissive:"#e1f5fe",emissiveIntensity:3,color:"#e1f5fe",transparent:!0,depthWrite:!1,opacity:.8*t})]},i))}),e.jsxs("mesh",{position:[0,.05,0],rotation:[-Math.PI/2,0,0],children:[e.jsx("ringGeometry",{args:[.4,.55,32]}),e.jsx("meshStandardMaterial",{emissive:"#4fc3f7",emissiveIntensity:2,color:"#4fc3f7",transparent:!0,depthWrite:!1,opacity:.4*t})]}),e.jsx(ae,{color:"#4fc3f7",radius:.4,count:40})]})}function de({square:r,turnsLeft:t,fadeOpacity:o=1}){if(!r)return null;const[h,,n]=I(r),l=d.useRef(),m=d.useRef(),c=t===1?3:t===2?2:1.2,s=t===1?"#76ff03":t===2?"#8bc34a":"#558b2f",f=d.useMemo(()=>[...Array(8)].map(()=>({angle:Math.random()*Math.PI*2,radius:.2+Math.random()*.2,speed:.5+Math.random()*.5,size:.04+Math.random()*.04,phase:Math.random()*Math.PI*2})),[]);return j(i=>{const a=i.clock.elapsedTime;if(l.current&&(l.current.rotation.y=a*.3*c),m.current){const u=Math.sin(a*3*c)*.1+1;m.current.scale.set(u,1,u)}}),e.jsxs("group",{position:[h,0,n],ref:l,children:[e.jsxs("mesh",{ref:m,position:[0,.4,0],children:[e.jsx("cylinderGeometry",{args:[.4,.35,.8,16,1,!0]}),e.jsx("meshStandardMaterial",{emissive:s,emissiveIntensity:c*1.5,color:s,transparent:!0,depthWrite:!1,opacity:.35*o})]}),[...Array(6)].map((i,a)=>e.jsx(he,{angle:a/6*Math.PI*2,radius:.35,color:s,speed:c,delay:a*.3,fadeOpacity:o},a)),f.map((i,a)=>e.jsx(fe,{...i,urgency:c,color:s,fadeOpacity:o},a)),t===1&&e.jsxs("mesh",{position:[0,.9,0],children:[e.jsx("octahedronGeometry",{args:[.12,0]}),e.jsx("meshStandardMaterial",{emissive:"#ff1744",emissiveIntensity:4,color:"#ff1744",transparent:!0,opacity:.9})]}),e.jsxs("mesh",{position:[0,.02,0],rotation:[-Math.PI/2,0,0],children:[e.jsx("circleGeometry",{args:[.4,32]}),e.jsx("meshStandardMaterial",{emissive:s,emissiveIntensity:1,color:s,transparent:!0,depthWrite:!1,opacity:.25*o})]}),e.jsx(oe,{color:s,intensity:c,count:30})]})}function he({angle:r,radius:t,color:o,speed:h,delay:n,fadeOpacity:l=1}){const m=d.useRef();return j(c=>{if(m.current){const s=(c.clock.elapsedTime*h+n)%2/2,f=.8-s*.7;m.current.position.y=f,m.current.material.opacity=(s<.1?s*10:s>.9?(1-s)*10:.7)*l,m.current.scale.y=1+s*2}}),e.jsxs("mesh",{ref:m,position:[Math.cos(r)*t,.8,Math.sin(r)*t],children:[e.jsx("sphereGeometry",{args:[.03,8,8]}),e.jsx("meshStandardMaterial",{emissive:o,emissiveIntensity:2,color:o,transparent:!0,depthWrite:!1,opacity:.7*l})]})}function fe({angle:r,radius:t,speed:o,size:h,phase:n,urgency:l,color:m,fadeOpacity:c=1}){const s=d.useRef();return j(f=>{if(s.current){const i=(f.clock.elapsedTime*o*l+n)%1.5/1.5,a=.1+i*.8;s.current.position.y=a,s.current.position.x=Math.cos(r+i*2)*t,s.current.position.z=Math.sin(r+i*2)*t,s.current.material.opacity=Math.sin(i*Math.PI)*.6*c;const u=h*(1+Math.sin(i*Math.PI)*.5);s.current.scale.set(u/.05,u/.05,u/.05)}}),e.jsxs("mesh",{ref:s,position:[Math.cos(r)*t,.1,Math.sin(r)*t],children:[e.jsx("sphereGeometry",{args:[.05,8,8]}),e.jsx("meshStandardMaterial",{emissive:m,emissiveIntensity:3,color:m,transparent:!0,depthWrite:!1,opacity:.5*c})]})}function xe({square:r}){if(!r)return null;const[t,,o]=I(r),h=d.useRef(),n=d.useRef();return j(l=>{const m=l.clock.elapsedTime;if(h.current&&(h.current.rotation.y=m*.5),n.current){const c=Math.sin(m*3)*.1+1;n.current.scale.set(c,c,c)}}),e.jsxs("group",{position:[t,0,o],ref:h,children:[e.jsxs("mesh",{ref:n,position:[0,.4,0],children:[e.jsx("octahedronGeometry",{args:[.5,1]}),e.jsx("meshStandardMaterial",{emissive:"#ffd54f",emissiveIntensity:2,color:"#ffca28",transparent:!0,depthWrite:!1,opacity:.25,wireframe:!0})]}),e.jsxs("mesh",{position:[0,.4,0],children:[e.jsx("sphereGeometry",{args:[.3,16,16]}),e.jsx("meshStandardMaterial",{emissive:"#fff59d",emissiveIntensity:1.5,color:"#fff59d",transparent:!0,depthWrite:!1,opacity:.2})]}),[0,120,240].map((l,m)=>e.jsx(le,{baseAngle:l,color:"#ffc107"},m)),e.jsxs("mesh",{position:[0,.05,0],rotation:[-Math.PI/2,0,0],children:[e.jsx("ringGeometry",{args:[.35,.45,32]}),e.jsx("meshStandardMaterial",{emissive:"#ffd54f",emissiveIntensity:2,color:"#ffd54f",transparent:!0,depthWrite:!1,opacity:.5})]})]})}function le({baseAngle:r,color:t}){const o=d.useRef();return j(h=>{if(o.current){const n=h.clock.elapsedTime,l=r*Math.PI/180+n*1.5;o.current.position.x=Math.cos(l)*.45,o.current.position.z=Math.sin(l)*.45,o.current.position.y=.4+Math.sin(n*2+r)*.1,o.current.rotation.y=-l}}),e.jsxs("mesh",{ref:o,children:[e.jsx("boxGeometry",{args:[.08,.12,.02]}),e.jsx("meshStandardMaterial",{emissive:t,emissiveIntensity:3,color:t,transparent:!0,depthWrite:!1,opacity:.8})]})}function Me({square:r,onComplete:t}){if(!r)return null;const[o,,h]=I(r),[n,l]=d.useState(0),m=d.useRef(),{finishing:c,finishT:s,completed:f,triggerFinish:i}=S(t,450);j((M,y)=>{l(v=>{const G=v+y*1.2;return G>=1&&(c||i()),Math.min(G,1)}),m.current&&(m.current.rotation.y=M.clock.elapsedTime*2)});const u=ce(n)*(1-s*.25),x=(n<.8?1:(1-n)*5)*(1-s);return f?null:e.jsxs("group",{position:[o,0,h],ref:m,scale:[u,u,u],children:[e.jsxs("mesh",{position:[0,.4,0],children:[e.jsx("octahedronGeometry",{args:[.5,1]}),e.jsx("meshStandardMaterial",{emissive:"#ffd54f",emissiveIntensity:3,color:"#ffca28",transparent:!0,depthWrite:!1,opacity:x*.4,wireframe:!0})]}),[...Array(12)].map((M,y)=>{const v=y/12*Math.PI*2,G=n*.8;return e.jsxs("mesh",{position:[Math.cos(v)*G,.4,Math.sin(v)*G],children:[e.jsx("sphereGeometry",{args:[.05,8,8]}),e.jsx("meshStandardMaterial",{emissive:"#fff59d",emissiveIntensity:4,color:"#fff59d",transparent:!0,depthWrite:!1,opacity:x*.8})]},y)})]})}function ye({onComplete:r}){const[t,o]=d.useState(0),h=d.useRef(),n=d.useMemo(()=>[...Array(48)].map(()=>({x:(Math.random()-.5)*12,z:(Math.random()-.5)*12,y:.1+Math.random()*.8,scale:.4+Math.random()*.6,speed:.15+Math.random()*.25,phase:Math.random()*Math.PI*2})),[]),{finishing:l,finishT:m,completed:c,triggerFinish:s}=S(r,500);return j((f,i)=>{o(a=>{const u=a+i*.5;return u>=1&&(l||s()),Math.min(u,1)})}),c?null:e.jsx("group",{ref:h,children:n.map((f,i)=>e.jsx(me,{...f,progress:t,hasComplete:!!r,finishT:m},i))})}function me({x:r,z:t,y:o,scale:h,speed:n,phase:l,progress:m,hasComplete:c,finishT:s=0,fadeOpacity:f=1}){const i=d.useRef();return j(a=>{if(i.current){const u=a.clock.elapsedTime;i.current.position.x=r+Math.sin(u*n+l)*.8,i.current.position.z=t+Math.cos(u*n+l)*.8,i.current.position.y=o+Math.sin(u*n*2+l)*.15;const p=c?.15*(1-m):.15;i.current.material.opacity=(p*(1-s)+Math.sin(u+l)*.03*(1-s))*f}}),e.jsxs("mesh",{ref:i,position:[r,o,t],children:[e.jsx("sphereGeometry",{args:[h,8,8]}),e.jsx("meshStandardMaterial",{emissive:"#17202a",emissiveIntensity:.2,color:"#1f2a44",transparent:!0,depthWrite:!1,opacity:.15*f})]})}function ge({square:r,onComplete:t}){if(!r)return null;const[o,,h]=I(r),[n,l]=d.useState(0),{finishing:m,finishT:c,completed:s,triggerFinish:f}=S(t,300);j((a,u)=>{l(p=>{const x=p+u*1.5;return x>=1&&(m||f()),Math.min(x,1)})});const i=(1-b(n))*(1-c);return s?null:e.jsxs("group",{position:[o,0,h],children:[[0,.15,.3].map((a,u)=>{const p=Math.max(0,Math.min(1,(n-a)/.7)),x=b(p)*1.5,M=(1-p)*.6;return e.jsxs("mesh",{position:[0,.3,0],rotation:[-Math.PI/2,0,0],scale:[x,x,1],children:[e.jsx("ringGeometry",{args:[.3,.4,32]}),e.jsx("meshStandardMaterial",{emissive:"#ffab91",emissiveIntensity:2,color:"#ffccbc",transparent:!0,depthWrite:!1,opacity:M*(1-c)})]},u)}),e.jsxs("mesh",{position:[0,.3,0],children:[e.jsx("sphereGeometry",{args:[.2*(1-n*.5),16,16]}),e.jsx("meshStandardMaterial",{emissive:"#ff8a65",emissiveIntensity:3*i,color:"#ffab91",transparent:!0,depthWrite:!1,opacity:i*.5})]}),[...Array(8)].map((a,u)=>{const p=u/8*Math.PI*2,x=b(n)*1;return e.jsxs("mesh",{position:[Math.cos(p)*x,.3,Math.sin(p)*x],children:[e.jsx("sphereGeometry",{args:[.06*i,8,8]}),e.jsx("meshStandardMaterial",{emissive:"#ffccbc",emissiveIntensity:3,color:"#ffccbc",transparent:!0,depthWrite:!1,opacity:i*.8})]},u)})]})}function je({onComplete:r}){return d.useEffect(()=>{r&&r()},[r]),null}function ve({square:r,onComplete:t}){if(!r)return null;const[o,,h]=I(r),[n,l]=d.useState(0),m=d.useRef(),c=d.useMemo(()=>[[2,1],[2,-1],[-2,1],[-2,-1],[1,2],[1,-2],[-1,2],[-1,-2]],[]),{finishing:s,finishT:f,completed:i,triggerFinish:a}=S(t,350);return j((u,p)=>{l(x=>{const M=x+p*1.5;return M>=1&&(s||a()),Math.min(M,1)}),m.current&&(m.current.rotation.y=u.clock.elapsedTime*2)}),i?null:e.jsxs("group",{position:[o,0,h],ref:m,children:[e.jsxs("mesh",{position:[0,.5,0],children:[e.jsx("sphereGeometry",{args:[.25*(1-n*.3)*(1-f*.3),16,16]}),e.jsx("meshStandardMaterial",{emissive:"#ce93d8",emissiveIntensity:3,color:"#e1bee7",transparent:!0,depthWrite:!1,opacity:(1-n)*.6*(1-f)})]}),c.map(([u,p],x)=>{const M=x*.06,y=Math.max(0,Math.min(1,(n-M)/.7)),v=b(y);return e.jsxs("group",{children:[e.jsxs("mesh",{position:[u*.3*v,.4,p*.3*v],children:[e.jsx("sphereGeometry",{args:[.1*(1-y)*(1-f*.25),8,8]}),e.jsx("meshStandardMaterial",{emissive:"#ba68c8",emissiveIntensity:3*(1-y)*(1-f),color:"#ce93d8",transparent:!0,depthWrite:!1,opacity:(1-y)*.7*(1-f)})]}),e.jsxs("mesh",{position:[u*.3,.4,p*.3],children:[e.jsx("sphereGeometry",{args:[.08*y*(1-f*.25),8,8]}),e.jsx("meshStandardMaterial",{emissive:"#e1bee7",emissiveIntensity:2,color:"#e1bee7",transparent:!0,depthWrite:!1,opacity:y*.5*(1-n)*(1-f)})]})]},x)})]})}function Ie({square:r,onComplete:t}){if(!r)return null;const[o,,h]=I(r),[n,l]=d.useState(0),{finishing:m,finishT:c,completed:s,triggerFinish:f}=S(t,300);return j((i,a)=>{l(u=>{const p=u+a*1.2;return p>=1&&(m||f()),Math.min(p,1)})}),s?null:e.jsxs("group",{position:[o,0,h],children:[[...Array(8)].map((i,a)=>{const u=a*.12,p=Math.max(0,Math.min(1,(n-u)/.6)),x=.3+p*.3,M=(a-4)*.3;return e.jsxs("mesh",{position:[0,x,M],children:[e.jsx("boxGeometry",{args:[.3,.5*(1-p*.5),.15]}),e.jsx("meshStandardMaterial",{emissive:"#5c6bc0",emissiveIntensity:2*(1-p)*(1-c),color:"#7986cb",transparent:!0,depthWrite:!1,opacity:(1-p)*.5*(1-c),wireframe:!0})]},a)}),e.jsxs("mesh",{position:[0,.5,0],children:[e.jsx("cylinderGeometry",{args:[.2,.3,.8,8]}),e.jsx("meshStandardMaterial",{emissive:"#7c4dff",emissiveIntensity:2*(1-n)*(1-c),color:"#b388ff",transparent:!0,depthWrite:!1,opacity:(1-n)*.4*(1-c)})]})]})}function Se({onComplete:r}){const[t,o]=d.useState(0),h=d.useRef(),{finishing:n,completed:l,triggerFinish:m}=S(r,300);return j((c,s)=>{o(f=>{const i=f+s*1.5;return i>=1&&(n||m()),Math.min(i,1)}),h.current&&(h.current.rotation.y=c.clock.elapsedTime*2)}),l?null:e.jsxs("group",{ref:h,children:[[...Array(24)].map((c,s)=>{const f=s/24*Math.PI*2,i=t*2.5,a=Math.sin(t*Math.PI)*1.5;return e.jsxs("mesh",{position:[Math.cos(f)*i,.2+a*(.5+Math.random()*.5),Math.sin(f)*i],children:[e.jsx("sphereGeometry",{args:[.06*(1-t*.5),8,8]}),e.jsx("meshStandardMaterial",{emissive:"#76ff03",emissiveIntensity:3*(1-t),color:"#b2ff59",transparent:!0,depthWrite:!1,opacity:(1-t)*.8})]},s)}),e.jsxs("mesh",{position:[0,.3,0],scale:[t*3,t*.5,t*3],children:[e.jsx("cylinderGeometry",{args:[1,1.2,.3,16,1,!0]}),e.jsx("meshStandardMaterial",{emissive:"#64dd17",emissiveIntensity:2*(1-t),color:"#76ff03",transparent:!0,depthWrite:!1,opacity:(1-t)*.3})]})]})}function Pe({onComplete:r}){const[t,o]=d.useState(0),{finishing:h,finishT:n,completed:l,triggerFinish:m}=S(r,400);return j((c,s)=>{o(f=>{const i=f+s*.8;return i>=1&&(h||m()),Math.min(i,1)})}),l?null:e.jsxs("group",{children:[[-3.5,-2.5,-1.5,-.5,.5,1.5,2.5,3.5].map((c,s)=>e.jsxs("mesh",{position:[c,b(t)*.4,-2.5],scale:[.8,b(t),.2],children:[e.jsx("boxGeometry",{args:[1,.8,1]}),e.jsx("meshStandardMaterial",{emissive:"#78909c",emissiveIntensity:1.5*(1-t*.5)*(1-n),color:"#90a4ae",transparent:!0,depthWrite:!1,opacity:.7*(1-t*.3)*(1-n)})]},s)),e.jsxs("mesh",{position:[0,.3,-2.5],rotation:[-Math.PI/2,0,0],children:[e.jsx("planeGeometry",{args:[8,1]}),e.jsx("meshStandardMaterial",{emissive:"#b0bec5",emissiveIntensity:2*(1-t)*(1-n),color:"#cfd8dc",transparent:!0,depthWrite:!1,opacity:(1-t)*.4*(1-n)})]})]})}function be({onComplete:r}){const[t,o]=d.useState(0),h=d.useRef(),{finishing:n,finishT:l,completed:m,triggerFinish:c}=S(r,400);return j((s,f)=>{o(i=>{const a=i+f*.6;return a>=1&&(n||c()),Math.min(a,1)}),h.current&&(h.current.rotation.y=s.clock.elapsedTime*(1-l*.3))}),m?null:e.jsxs("group",{ref:h,children:[e.jsxs("mesh",{position:[0,3,0],children:[e.jsx("cylinderGeometry",{args:[.1,2,6,32,1,!0]}),e.jsx("meshStandardMaterial",{emissive:"#fff9c4",emissiveIntensity:3*b(t),color:"#ffecb3",transparent:!0,depthWrite:!1,opacity:.4*(1-t*.5)})]}),[0,1,2].map(s=>e.jsxs("mesh",{position:[0,.5+s*.4,0],rotation:[-Math.PI/2,0,t*Math.PI*2],scale:[1-s*.2,1-s*.2,1],children:[e.jsx("ringGeometry",{args:[.4,.5,32]}),e.jsx("meshStandardMaterial",{emissive:"#ffd54f",emissiveIntensity:2,color:"#ffecb3",transparent:!0,depthWrite:!1,opacity:.6*(1-t*.5)})]},s)),[...Array(12)].map((s,f)=>{const i=f/12*Math.PI*2,a=f*.05,u=Math.max(0,Math.min(1,(t-a)/.8));return e.jsxs("mesh",{position:[Math.cos(i)*(.5+u*2),2-u*1.5,Math.sin(i)*(.5+u*2)],rotation:[0,-i,Math.PI/4],children:[e.jsx("planeGeometry",{args:[.1,.3]}),e.jsx("meshStandardMaterial",{emissive:"#ffffff",emissiveIntensity:3,color:"#ffffff",transparent:!0,opacity:(1-u)*.8})]},f)})]})}function Re({square:r,onComplete:t}){if(!r)return null;const[o,,h]=I(r),[n,l]=d.useState(0),{finishing:m,finishT:c,completed:s,triggerFinish:f}=S(t,450);return j((i,a)=>{l(u=>{const p=u+a*2;return p>=1&&(m||f()),Math.min(p,1)})}),s?null:e.jsxs("group",{position:[o,0,h],children:[e.jsxs("mesh",{position:[0,.5,0],rotation:[0,Math.PI/4,0],scale:[1-c*.2,1-c*.2,1],children:[e.jsx("boxGeometry",{args:[.1,.8*b(n)*(1-c*.3),.02]}),e.jsx("meshStandardMaterial",{emissive:"#f44336",emissiveIntensity:4*(1-c),color:"#ff5252",transparent:!0,depthWrite:!1,opacity:(1-n*.3)*(1-c)})]}),e.jsxs("mesh",{position:[0,.5,0],rotation:[0,-Math.PI/4,0],scale:[1-c*.2,1-c*.2,1],children:[e.jsx("boxGeometry",{args:[.1,.8*b(n)*(1-c*.3),.02]}),e.jsx("meshStandardMaterial",{emissive:"#f44336",emissiveIntensity:4*(1-c),color:"#ff5252",transparent:!0,depthWrite:!1,opacity:(1-n*.3)*(1-c)})]}),[...Array(16)].map((i,a)=>{const u=a/16*Math.PI*2,p=n*1.5;return e.jsxs("mesh",{position:[Math.cos(u)*p,.5+Math.sin(n*Math.PI)*.5,Math.sin(u)*p],children:[e.jsx("boxGeometry",{args:[.08,.08,.08]}),e.jsx("meshStandardMaterial",{emissive:"#ff1744",emissiveIntensity:3*(1-n),color:"#ff5252",transparent:!0,depthWrite:!1,opacity:(1-n)*.9})]},a)})]})}function Ge({onComplete:r}){const[t,o]=d.useState(0),{finishing:h,finishT:n,completed:l,triggerFinish:m}=S(r,350);return j((c,s)=>{o(f=>{const i=f+s*.8;return i>=1&&(h||m()),Math.min(i,1)})}),l?null:e.jsxs("group",{children:[e.jsxs("mesh",{position:[0,2,0],rotation:[Math.PI/2,0,0],children:[e.jsx("ringGeometry",{args:[.8,1,32]}),e.jsx("meshStandardMaterial",{emissive:"#4fc3f7",emissiveIntensity:2*b(t),color:"#81d4fa",transparent:!0,depthWrite:!1,opacity:.5*(1-t*.3)})]}),[...Array(24)].map((c,s)=>{const f=s/24*Math.PI*2,i=b(t)*5,a=s*.02,u=Math.max(0,Math.min(1,(t-a)/.8));return e.jsxs("mesh",{position:[Math.cos(f)*i,.1,Math.sin(f)*i],rotation:[0,f,0],children:[e.jsx("coneGeometry",{args:[.1,.4*u,4]}),e.jsx("meshStandardMaterial",{emissive:"#e1f5fe",emissiveIntensity:2*(1-n),color:"#b3e5fc",transparent:!0,depthWrite:!1,opacity:(1-t*.5)*.7*(1-n)})]},s)}),e.jsxs("mesh",{position:[0,.05,0],rotation:[-Math.PI/2,0,0],scale:[t*6,t*6,1],children:[e.jsx("circleGeometry",{args:[1,32]}),e.jsx("meshStandardMaterial",{emissive:"#4fc3f7",emissiveIntensity:1.5*(1-t),color:"#81d4fa",transparent:!0,depthWrite:!1,opacity:(1-t)*.3})]})]})}function We({onComplete:r}){const[t,o]=d.useState(0),{finishing:h,finishT:n,completed:l,triggerFinish:m}=S(r,500);return j((c,s)=>{o(f=>{const i=f+s*.6;return i>=1&&(h||m()),Math.min(i,1)})}),l?null:e.jsxs("group",{children:[[...Array(12)].map((c,s)=>{const f=s/12*Math.PI*2-t*Math.PI*4,i=2+s*.3,a=Math.sin((t+s/12)*Math.PI)*2;return e.jsxs("mesh",{position:[Math.cos(f)*i,a,Math.sin(f)*i],children:[e.jsx("sphereGeometry",{args:[.15,8,8]}),e.jsx("meshStandardMaterial",{emissive:"#3498db",emissiveIntensity:2*(1-t*.5)*(1-n),color:"#64b5f6",transparent:!0,depthWrite:!1,opacity:(1-t*.6)*.8*(1-n)})]},s)}),[...Array(16)].map((c,s)=>{const f=s/16*Math.PI*2+t*.5,i=b(t)*3;return e.jsxs("mesh",{position:[Math.cos(f)*i,.3+Math.sin(t*Math.PI+s)*.2,Math.sin(f)*i],children:[e.jsx("boxGeometry",{args:[.12,.12,.12]}),e.jsx("meshStandardMaterial",{emissive:"#1e88e5",emissiveIntensity:1.5*(1-t),color:"#42a5f5",transparent:!0,depthWrite:!1,opacity:(1-t*.8)*.5})]},`trail-${s}`)}),e.jsxs("mesh",{position:[0,.02,0],rotation:[-Math.PI/2,0,0],scale:[t*8,t*8,1],children:[e.jsx("ringGeometry",{args:[t*3,t*3.2,32]}),e.jsx("meshStandardMaterial",{emissive:"#2196f3",emissiveIntensity:1.5*(1-t),color:"#64b5f6",transparent:!0,depthWrite:!1,opacity:(1-t*.5)*.4})]}),e.jsxs("mesh",{position:[0,1,0],rotation:[0,t*Math.PI*2,0],children:[e.jsx("dodecahedronGeometry",{args:[2,2]}),e.jsx("meshStandardMaterial",{emissive:"#0d47a1",emissiveIntensity:.8*(1-t),color:"#1565c0",transparent:!0,opacity:(1-t*.7)*.3,wireframe:!0})]})]})}function Ee({origin:r,chained:t,onComplete:o}){const[h,n]=d.useState(0),{finishing:l,finishT:m,triggerFinish:c}=S(o,300);j((f,i)=>{n(a=>{const u=a+i*2.5;return u>=1&&(l||c()),Math.min(u,1)})});const s=r?I(r):[0,0,0];return e.jsxs("group",{children:[e.jsxs("mesh",{position:[s[0],.5,s[2]],children:[e.jsx("sphereGeometry",{args:[.2*(1-h*.5),16,16]}),e.jsx("meshStandardMaterial",{emissive:"#ffeb3b",emissiveIntensity:5*(1-h),color:"#fff59d",transparent:!0,opacity:(1-h)*.9})]}),(t||[]).map((f,i)=>{const a=I(f),u=i*.1,p=Math.max(0,Math.min(1,(h-u)/.6));return e.jsxs("group",{children:[[...Array(5)].map((x,M)=>{const y=M/4,v=s[0]+(a[0]-s[0])*y*p,G=s[2]+(a[2]-s[2])*y*p,E=Math.sin(M*3+h*10)*.1;return e.jsxs("mesh",{position:[v+E,.5+Math.sin(y*Math.PI)*.3,G+E],children:[e.jsx("sphereGeometry",{args:[.08,8,8]}),e.jsx("meshStandardMaterial",{emissive:"#fff176",emissiveIntensity:4*(1-p*.5)*(1-m),color:"#ffeb3b",transparent:!0,opacity:(1-p)*.9*(1-m)})]},M)}),e.jsxs("mesh",{position:[a[0],.5,a[2]],children:[e.jsx("sphereGeometry",{args:[.15*p,12,12]}),e.jsx("meshStandardMaterial",{emissive:"#ffeb3b",emissiveIntensity:5*p*(1-h)*(1-m),color:"#fff59d",transparent:!0,opacity:p*(1-h)*.9*(1-m)})]})]},i)})]})}function ze({shuffledSquares:r=[],onComplete:t}){const[o,h]=d.useState(0),n=d.useRef(),l=150,{finishing:m,finishT:c,triggerFinish:s}=S(t,600),f=d.useMemo(()=>[...Array(l)].map(()=>({theta:Math.random()*Math.PI*2,phi:Math.random()*Math.PI,speed:1+Math.random()*2,radius:3+Math.random()*3,offset:Math.random()*Math.PI*2,size:.03+Math.random()*.05,color:Math.random()>.5?"#9b59b6":"#8e44ad"})),[]);j((a,u)=>{h(p=>{const x=p+u/3;return x>=1?(m||s(),1):x}),n.current&&(n.current.rotation.y+=u*.8*(1-c*.5))});const i=(o<.1?o*10:o>.8?(1-o)*5:1)*(1-c);return e.jsxs("group",{ref:n,position:[0,2,0],children:[e.jsxs("mesh",{children:[e.jsx("torusGeometry",{args:[2,.1,16,100]}),e.jsx("meshStandardMaterial",{emissive:"#9b59b6",emissiveIntensity:3*(1-c),color:"#8e44ad",transparent:!0,opacity:i*.6})]}),f.map((a,u)=>{const p=o*a.speed+a.offset,x=a.radius*(1-Math.abs(o-.5)),M=Math.sin(a.phi)*Math.cos(a.theta+p*3)*x,y=Math.cos(a.phi)*x*.5+Math.sin(p*5)*.3,v=Math.sin(a.phi)*Math.sin(a.theta+p*3)*x;return e.jsxs("mesh",{position:[M,y,v],children:[e.jsx("sphereGeometry",{args:[a.size,8,8]}),e.jsx("meshStandardMaterial",{emissive:a.color,emissiveIntensity:2*(1-c),color:a.color,transparent:!0,opacity:i*.8})]},u)}),r.map((a,u)=>{const[p,,x]=I(a),M=u*.5,y=Math.sin(o*Math.PI*4+M)*.2+1;return e.jsxs("mesh",{position:[p,.1,x],scale:[y,1,y],children:[e.jsx("cylinderGeometry",{args:[.4,.4,.05,32]}),e.jsx("meshStandardMaterial",{emissive:"#9b59b6",emissiveIntensity:3*i,color:"#8e44ad",transparent:!0,opacity:i*.6})]},a)})]})}function Te({onComplete:r}){return d.useEffect(()=>{if(r){const t=setTimeout(()=>r(),0);return()=>clearTimeout(t)}},[r]),null}function Ae({square:r,onComplete:t}){const[o,h]=d.useState(0),n=d.useRef(),[l,,m]=r?I(r):[0,0,0],{finishing:c,finishT:s,triggerFinish:f}=S(t,400);j((a,u)=>{h(p=>{const x=p+u/2;return x>=1?(c||f(),1):x}),n.current&&(n.current.rotation.y+=u*.5*(1-s*.5))});const i=(o<.1?o*10:o>.8?(1-o)*5:1)*(1-s);return e.jsxs("group",{position:[l,0,m],ref:n,children:[e.jsxs("mesh",{position:[0,.4,0],children:[e.jsx("sphereGeometry",{args:[.5,32,16,0,Math.PI*2,0,Math.PI/2]}),e.jsx("meshStandardMaterial",{emissive:"#ffd700",emissiveIntensity:2,color:"#ffeb3b",transparent:!0,opacity:i*.3})]}),e.jsxs("mesh",{position:[0,.05,0],rotation:[-Math.PI/2,0,0],children:[e.jsx("ringGeometry",{args:[.4,.5,32]}),e.jsx("meshStandardMaterial",{emissive:"#ffd700",emissiveIntensity:3,color:"#ffeb3b",transparent:!0,opacity:i*.6})]}),[...Array(12)].map((a,u)=>{const p=u/12*Math.PI*2,x=.35,M=(o+u*.1)%1;return e.jsxs("mesh",{position:[Math.cos(p)*x,M*.8,Math.sin(p)*x],children:[e.jsx("sphereGeometry",{args:[.02,8,8]}),e.jsx("meshStandardMaterial",{emissive:"#ffd700",emissiveIntensity:3,color:"#ffeb3b",transparent:!0,opacity:i*(1-M)})]},u)})]})}function Fe({square:r,fadeOpacity:t=1}){const[o,,h]=r?I(r):[0,0,0],n=d.useRef(),l=d.useRef();return j(m=>{const c=m.clock.elapsedTime;n.current&&(n.current.material.opacity=(.3+Math.sin(c*2)*.15)*t),l.current&&(l.current.material.opacity=(.2+Math.sin(c*1.5)*.1)*t)}),e.jsxs("group",{position:[o,.12,h],children:[e.jsxs("mesh",{position:[0,-.1,0],rotation:[-Math.PI/2,0,0],ref:l,children:[e.jsx("circleGeometry",{args:[.48,32]}),e.jsx("meshStandardMaterial",{emissive:"#ffd700",emissiveIntensity:1.5,color:"#ffeb3b",transparent:!0,opacity:.25*t,depthWrite:!1})]}),e.jsxs("mesh",{ref:n,rotation:[-Math.PI/2,0,0],children:[e.jsx("ringGeometry",{args:[.35,.45,32]}),e.jsx("meshStandardMaterial",{emissive:"#ffd700",emissiveIntensity:2,color:"#ffeb3b",transparent:!0,opacity:.4*t,depthWrite:!1})]})]})}function we({square:r,onComplete:t,fadeOpacity:o=1}){const[h,n]=d.useState(0),l=d.useRef(),{finishing:m,finishT:c,triggerFinish:s}=S(t,400),[f,,i]=r?I(r):[0,0,0];j((u,p)=>{n(x=>{const M=x+p/2;return M>=1?(m||s(),1):M}),l.current&&(l.current.rotation.y-=p*.8*(1-c*.5))});const a=(h<.1?h*10:h>.8?(1-h)*5:1)*(1-c)*o;return e.jsxs("group",{position:[f,0,i],ref:l,children:[e.jsxs("mesh",{position:[0,.001,0],rotation:[-Math.PI/2,0,0],children:[e.jsx("ringGeometry",{args:[.2,.45,32]}),e.jsx("meshStandardMaterial",{color:"#4a0000",transparent:!0,opacity:a*.4,depthWrite:!1})]}),[...Array(12)].map((u,p)=>{const x=p/12*Math.PI*2,M=.25*Math.random()+.08,y=(h*2+p*.06)%1;return e.jsxs("mesh",{position:[Math.cos(x+h*2.5)*M,y*.4,Math.sin(x+h*2.5)*M],children:[e.jsx("sphereGeometry",{args:[.012,4,4]}),e.jsx("meshStandardMaterial",{color:"#8b0000",transparent:!0,opacity:a*(1-y)*.6,depthWrite:!1})]},p)})]})}function ke({square:r,turnsLeft:t,fadeOpacity:o=1}){const[h,,n]=r?I(r):[0,0,0],l=d.useRef(),m=d.useRef();return j(c=>{const s=c.clock.elapsedTime;l.current&&(l.current.rotation.z=s*.5,l.current.material.opacity=(.3+Math.sin(s*3)*.1)*o),m.current&&(m.current.material.opacity=(.25+Math.sin(s*2)*.1)*o)}),e.jsxs("group",{position:[h,.12,n],children:[e.jsxs("mesh",{position:[0,-.1,0],rotation:[-Math.PI/2,0,0],ref:m,children:[e.jsx("circleGeometry",{args:[.48,32]}),e.jsx("meshStandardMaterial",{color:"#4a0000",transparent:!0,opacity:.25*o,depthWrite:!1})]}),e.jsxs("mesh",{ref:l,rotation:[-Math.PI/2,0,0],children:[e.jsx("ringGeometry",{args:[.35,.42,6]}),e.jsx("meshStandardMaterial",{color:"#8b0000",transparent:!0,opacity:.35*o,depthWrite:!1})]})]})}export{Ee as ChainLightningEffect,ze as ChaosTheoryEffect,we as CursedSquareEffect,ke as CursedSquareIndicatorEffect,be as DivineInterventionEffect,Re as ExecutionEffect,ye as FogOfWarEffect,Pe as IronFortressEffect,je as PawnRushEffect,ve as PhantomStepEffect,Se as PoisonTouchEffect,de as PoisonedPieceEffect,Ae as SanctuaryEffect,Fe as SanctuaryIndicatorEffect,pe as ShieldGlowEffect,ge as SoftPushEffect,Ie as SpectralMarchEffect,Me as SquireSupportAnimationEffect,xe as SquireSupportEffect,Ge as TimeFreezeEffect,We as TimeTravelEffect,Te as VisionEffect};
