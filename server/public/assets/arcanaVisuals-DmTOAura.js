import{r as d,u as M,j as e,A as se,M as w,V as U,S as re,O as ie,C as ne,s as S,D as v}from"./index-DUt4l0_P.js";const R=new ie,k=new ne;function H({count:n=100,config:t={},position:h=[0,0,0],onComplete:m}){const i=d.useRef(),u=d.useRef([]),[f,s]=d.useState(!1),{emitOnce:r=!0,emitRate:o=50,lifetime:c=[.5,1.5],spawnShape:a="point",spawnRadius:l=.5,spawnBox:p=[1,1,1],velocity:x=[0,1,0],velocitySpread:y=[.5,.5,.5],radialVelocity:j=0,gravity:b=[0,-2,0],drag:T=0,sizeStart:z=.1,sizeEnd:J=0,sizeVariance:K=.02,colorStart:V="#ffffff",colorEnd:N="#ffffff",emissive:Q="#ffffff",emissiveIntensity:X=2,opacityStart:Y=1,opacityEnd:Z=0,rotationSpeed:L=0,blending:O=se,depthWrite:q=!1}=t;d.useEffect(()=>{const F=[];for(let P=0;P<n;P++)F.push({position:new U,velocity:new U,age:r?0:-Math.random()*(n/o),maxAge:w.randFloat(c[0],c[1]),size:z+(Math.random()-.5)*K*2,rotation:Math.random()*Math.PI*2,alive:r}),r&&$(F[P],{spawnShape:a,spawnRadius:l,spawnBox:p,velocity:x,velocitySpread:y,radialVelocity:j});u.current=F},[n]);const A=d.useMemo(()=>new re(1,8,8),[]);return d.useEffect(()=>()=>{A&&A.dispose()},[A]),M((F,P)=>{if(!i.current||f)return;const W=u.current;let D=0,B=0;const ee=r?0:Math.floor(o*P*2);for(let E=0;E<W.length;E++){const g=W[E];if(!r&&!g.alive&&B<ee&&(g.alive=!0,g.age=0,g.maxAge=w.randFloat(c[0],c[1]),$(g,{spawnShape:a,spawnRadius:l,spawnBox:p,velocity:x,velocitySpread:y,radialVelocity:j}),B++),!g.alive){R.scale.set(0,0,0),R.updateMatrix(),i.current.setMatrixAt(E,R.matrix);continue}if(g.age+=P,g.age>=g.maxAge){g.alive=!1,R.scale.set(0,0,0),R.updateMatrix(),i.current.setMatrixAt(E,R.matrix);continue}D++;const _=g.age/g.maxAge;g.velocity.x+=b[0]*P,g.velocity.y+=b[1]*P,g.velocity.z+=b[2]*P,T>0&&g.velocity.multiplyScalar(1-T*P),g.position.x+=g.velocity.x*P,g.position.y+=g.velocity.y*P,g.position.z+=g.velocity.z*P,g.rotation+=L*P;const C=w.lerp(z,J,ae(_))*g.size/z;R.position.copy(g.position),R.scale.set(C,C,C),R.rotation.z=g.rotation,R.updateMatrix(),i.current.setMatrixAt(E,R.matrix);const te=w.lerp(Y,Z,_);k.set(V).lerp(k.set(N),_),k.multiplyScalar(te),i.current.setColorAt(E,k)}i.current.instanceMatrix.needsUpdate=!0,i.current.instanceColor&&(i.current.instanceColor.needsUpdate=!0),r&&D===0&&!f&&(s(!0),m==null||m())}),f?null:e.jsx("group",{position:h,children:e.jsx("instancedMesh",{ref:i,args:[A,void 0,n],frustumCulled:!1,children:e.jsx("meshStandardMaterial",{emissive:Q,emissiveIntensity:X,color:V,transparent:!0,opacity:1,blending:O,depthWrite:q,toneMapped:!1})})})}function $(n,t){const{spawnShape:h,spawnRadius:m,spawnBox:i,velocity:u,velocitySpread:f,radialVelocity:s}=t;switch(h){case"sphere":{const r=Math.random()*Math.PI*2,o=Math.acos(2*Math.random()-1),c=Math.cbrt(Math.random())*m;n.position.set(c*Math.sin(o)*Math.cos(r),c*Math.sin(o)*Math.sin(r),c*Math.cos(o));break}case"ring":{const r=Math.random()*Math.PI*2;n.position.set(Math.cos(r)*m,0,Math.sin(r)*m);break}case"box":{n.position.set((Math.random()-.5)*i[0],(Math.random()-.5)*i[1],(Math.random()-.5)*i[2]);break}default:n.position.set(0,0,0)}if(n.velocity.set(u[0]+(Math.random()-.5)*f[0]*2,u[1]+(Math.random()-.5)*f[1]*2,u[2]+(Math.random()-.5)*f[2]*2),s!==0){const r=n.position.clone().normalize();r.length()<.001&&r.set(Math.random()-.5,Math.random()-.5,Math.random()-.5).normalize(),n.velocity.add(r.multiplyScalar(s))}}const ae=n=>1-Math.pow(1-n,3);function oe({position:n=[0,0,0],count:t=60,color:h="#4fc3f7",radius:m=.45}){const i=d.useRef();return M(u=>{i.current&&(i.current.rotation.y=u.clock.elapsedTime*.8)}),e.jsx("group",{ref:i,position:n,children:e.jsx(H,{count:t,config:{emitOnce:!1,emitRate:20,lifetime:[1,2],spawnShape:"ring",spawnRadius:m,velocity:[0,.5,0],velocitySpread:[.1,.1,.1],gravity:[0,0,0],sizeStart:.03,sizeEnd:.01,colorStart:h,colorEnd:"#e1f5fe",emissive:h,emissiveIntensity:4,opacityStart:.9,opacityEnd:0}})})}function ce({position:n=[0,0,0],count:t=40,color:h="#76ff03",intensity:m=1}){return e.jsx(H,{position:n,count:t,config:{emitOnce:!1,emitRate:15*m,lifetime:[.8,1.5],spawnShape:"ring",spawnRadius:.3,velocity:[0,-.3,0],velocitySpread:[.2,.1,.2],gravity:[0,-1,0],sizeStart:.04,sizeEnd:.06,colorStart:h,colorEnd:"#b2ff59",emissive:h,emissiveIntensity:2*m,opacityStart:.7,opacityEnd:0}})}const G=n=>1-Math.pow(1-n,3),he=n=>{const t=2*Math.PI/3;return n===0?0:n===1?1:Math.pow(2,-10*n)*Math.sin((n*10-.75)*t)+1};function I(n,t=400){const[h,m]=d.useState(!1),[i,u]=d.useState(0);return d.useEffect(()=>{if(!h)return;let f=null,s=null;const r=o=>{s||(s=o);const c=o-s,a=Math.min(c/t,1);u(a),a<1?f=requestAnimationFrame(r):n&&n()};return f=requestAnimationFrame(r),()=>{f&&cancelAnimationFrame(f)}},[h,t,n]),{finishing:h,finishT:i,triggerFinish:()=>m(!0)}}function de({square:n,fadeOpacity:t=1}){if(!n)return null;const[h,,m]=S(n),i=d.useRef(),u=d.useRef(),f=d.useRef(),s=d.useRef(),r=d.useMemo(()=>[...Array(6)].map((o,c)=>{const a=c/6*Math.PI*2;return[Math.cos(a)*.4,.5,Math.sin(a)*.4]}),[]);return M(o=>{const c=o.clock.elapsedTime;if(i.current&&(i.current.rotation.y=c*.5),u.current){const a=Math.sin(c*4)*.08+1;u.current.scale.set(a,1,a),u.current.material.opacity=(.3+Math.sin(c*3)*.1)*t}f.current&&(f.current.rotation.y=-c*.3,f.current.material.opacity=(.15+Math.sin(c*2)*.05)*t),s.current&&s.current.children.forEach((a,l)=>{const p=l/6*Math.PI*2;a.position.y=.5+Math.sin(c*2+p)*.1,a.material.opacity=(.6+Math.sin(c*3+p)*.3)*t})}),e.jsxs("group",{position:[h,0,m],ref:i,children:[e.jsxs("mesh",{ref:u,position:[0,.5,0],children:[e.jsx("cylinderGeometry",{args:[.45,.45,1,32,1,!0]}),e.jsx("meshStandardMaterial",{emissive:"#4fc3f7",emissiveIntensity:2.5,color:"#81d4fa",transparent:!0,opacity:.35*t,side:v})]}),e.jsxs("mesh",{ref:f,position:[0,.5,0],children:[e.jsx("cylinderGeometry",{args:[.55,.55,.9,6,1,!0]}),e.jsx("meshStandardMaterial",{emissive:"#29b6f6",emissiveIntensity:1.5,color:"#4fc3f7",transparent:!0,opacity:.2*t,wireframe:!0})]}),e.jsx("group",{ref:s,children:r.map((o,c)=>e.jsxs("mesh",{position:o,children:[e.jsx("octahedronGeometry",{args:[.08,0]}),e.jsx("meshStandardMaterial",{emissive:"#e1f5fe",emissiveIntensity:3,color:"#e1f5fe",transparent:!0,opacity:.8*t})]},c))}),e.jsxs("mesh",{position:[0,.05,0],rotation:[-Math.PI/2,0,0],children:[e.jsx("ringGeometry",{args:[.4,.55,32]}),e.jsx("meshStandardMaterial",{emissive:"#4fc3f7",emissiveIntensity:2,color:"#4fc3f7",transparent:!0,opacity:.4*t,side:v})]}),e.jsx(oe,{color:"#4fc3f7",radius:.4,count:40})]})}function xe({square:n,turnsLeft:t,fadeOpacity:h=1}){if(!n)return null;const[m,,i]=S(n),u=d.useRef(),f=d.useRef(),s=t===1?3:t===2?2:1.2,r=t===1?"#76ff03":t===2?"#8bc34a":"#558b2f",o=d.useMemo(()=>[...Array(8)].map(()=>({angle:Math.random()*Math.PI*2,radius:.2+Math.random()*.2,speed:.5+Math.random()*.5,size:.04+Math.random()*.04,phase:Math.random()*Math.PI*2})),[]);return M(c=>{const a=c.clock.elapsedTime;if(u.current&&(u.current.rotation.y=a*.3*s),f.current){const l=Math.sin(a*3*s)*.1+1;f.current.scale.set(l,1,l)}}),e.jsxs("group",{position:[m,0,i],ref:u,children:[e.jsxs("mesh",{ref:f,position:[0,.4,0],children:[e.jsx("cylinderGeometry",{args:[.4,.35,.8,16,1,!0]}),e.jsx("meshStandardMaterial",{emissive:r,emissiveIntensity:s*1.5,color:r,transparent:!0,opacity:.35*h,side:v})]}),[...Array(6)].map((c,a)=>e.jsx(fe,{angle:a/6*Math.PI*2,radius:.35,color:r,speed:s,delay:a*.3,fadeOpacity:h},a)),o.map((c,a)=>e.jsx(me,{...c,urgency:s,color:r,fadeOpacity:h},a)),t===1&&e.jsxs("mesh",{position:[0,.9,0],children:[e.jsx("octahedronGeometry",{args:[.12,0]}),e.jsx("meshStandardMaterial",{emissive:"#ff1744",emissiveIntensity:4,color:"#ff1744",transparent:!0,opacity:.9})]}),e.jsxs("mesh",{position:[0,.02,0],rotation:[-Math.PI/2,0,0],children:[e.jsx("circleGeometry",{args:[.4,32]}),e.jsx("meshStandardMaterial",{emissive:r,emissiveIntensity:1,color:r,transparent:!0,opacity:.25*h})]}),e.jsx(ce,{color:r,intensity:s,count:30})]})}function fe({angle:n,radius:t,color:h,speed:m,delay:i,fadeOpacity:u=1}){const f=d.useRef();return M(s=>{if(f.current){const r=(s.clock.elapsedTime*m+i)%2/2,o=.8-r*.7;f.current.position.y=o,f.current.material.opacity=(r<.1?r*10:r>.9?(1-r)*10:.7)*u,f.current.scale.y=1+r*2}}),e.jsxs("mesh",{ref:f,position:[Math.cos(n)*t,.8,Math.sin(n)*t],children:[e.jsx("sphereGeometry",{args:[.03,8,8]}),e.jsx("meshStandardMaterial",{emissive:h,emissiveIntensity:2,color:h,transparent:!0,opacity:.7*u})]})}function me({angle:n,radius:t,speed:h,size:m,phase:i,urgency:u,color:f,fadeOpacity:s=1}){const r=d.useRef();return M(o=>{if(r.current){const c=(o.clock.elapsedTime*h*u+i)%1.5/1.5,a=.1+c*.8;r.current.position.y=a,r.current.position.x=Math.cos(n+c*2)*t,r.current.position.z=Math.sin(n+c*2)*t,r.current.material.opacity=Math.sin(c*Math.PI)*.6*s;const l=m*(1+Math.sin(c*Math.PI)*.5);r.current.scale.set(l/.05,l/.05,l/.05)}}),e.jsxs("mesh",{ref:r,position:[Math.cos(n)*t,.1,Math.sin(n)*t],children:[e.jsx("sphereGeometry",{args:[.05,8,8]}),e.jsx("meshStandardMaterial",{emissive:f,emissiveIntensity:3,color:f,transparent:!0,opacity:.5*s})]})}function ye({square:n}){if(!n)return null;const[t,,h]=S(n),m=d.useRef(),i=d.useRef();return M(u=>{const f=u.clock.elapsedTime;if(m.current&&(m.current.rotation.y=f*.5),i.current){const s=Math.sin(f*3)*.1+1;i.current.scale.set(s,s,s)}}),e.jsxs("group",{position:[t,0,h],ref:m,children:[e.jsxs("mesh",{ref:i,position:[0,.4,0],children:[e.jsx("octahedronGeometry",{args:[.5,1]}),e.jsx("meshStandardMaterial",{emissive:"#ffd54f",emissiveIntensity:2,color:"#ffca28",transparent:!0,opacity:.25,wireframe:!0})]}),e.jsxs("mesh",{position:[0,.4,0],children:[e.jsx("sphereGeometry",{args:[.3,16,16]}),e.jsx("meshStandardMaterial",{emissive:"#fff59d",emissiveIntensity:1.5,color:"#fff59d",transparent:!0,opacity:.2})]}),[0,120,240].map((u,f)=>e.jsx(ue,{baseAngle:u,color:"#ffc107"},f)),e.jsxs("mesh",{position:[0,.05,0],rotation:[-Math.PI/2,0,0],children:[e.jsx("ringGeometry",{args:[.35,.45,32]}),e.jsx("meshStandardMaterial",{emissive:"#ffd54f",emissiveIntensity:2,color:"#ffd54f",transparent:!0,opacity:.5})]})]})}function ue({baseAngle:n,color:t}){const h=d.useRef();return M(m=>{if(h.current){const i=m.clock.elapsedTime,u=n*Math.PI/180+i*1.5;h.current.position.x=Math.cos(u)*.45,h.current.position.z=Math.sin(u)*.45,h.current.position.y=.4+Math.sin(i*2+n)*.1,h.current.rotation.y=-u}}),e.jsxs("mesh",{ref:h,children:[e.jsx("boxGeometry",{args:[.08,.12,.02]}),e.jsx("meshStandardMaterial",{emissive:t,emissiveIntensity:3,color:t,transparent:!0,opacity:.8})]})}function Me({square:n,onComplete:t}){if(!n)return null;const[h,,m]=S(n),[i,u]=d.useState(0),f=d.useRef(),{finishing:s,finishT:r,triggerFinish:o}=I(t,450);M((x,y)=>{u(j=>{const b=j+y*1.2;return b>=1&&(s||o()),Math.min(b,1)}),f.current&&(f.current.rotation.y=x.clock.elapsedTime*2)});const a=he(i)*(1-r*.25),p=(i<.8?1:(1-i)*5)*(1-r);return e.jsxs("group",{position:[h,0,m],ref:f,scale:[a,a,a],children:[e.jsxs("mesh",{position:[0,.4,0],children:[e.jsx("octahedronGeometry",{args:[.5,1]}),e.jsx("meshStandardMaterial",{emissive:"#ffd54f",emissiveIntensity:3,color:"#ffca28",transparent:!0,opacity:p*.4,wireframe:!0})]}),[...Array(12)].map((x,y)=>{const j=y/12*Math.PI*2,b=i*.8;return e.jsxs("mesh",{position:[Math.cos(j)*b,.4,Math.sin(j)*b],children:[e.jsx("sphereGeometry",{args:[.05,8,8]}),e.jsx("meshStandardMaterial",{emissive:"#fff59d",emissiveIntensity:4,color:"#fff59d",transparent:!0,opacity:p*.8})]},y)})]})}function ge({onComplete:n}){const[t,h]=d.useState(0),m=d.useRef(),i=d.useMemo(()=>[...Array(48)].map(()=>({x:(Math.random()-.5)*12,z:(Math.random()-.5)*12,y:.1+Math.random()*.8,scale:.4+Math.random()*.6,speed:.15+Math.random()*.25,phase:Math.random()*Math.PI*2})),[]),{finishing:u,finishT:f,triggerFinish:s}=I(n,500);return M((r,o)=>{h(c=>{const a=c+o*.5;return a>=1&&(u||s()),Math.min(a,1)})}),e.jsx("group",{ref:m,children:i.map((r,o)=>e.jsx(le,{...r,progress:t,hasComplete:!!n,finishT:f},o))})}function le({x:n,z:t,y:h,scale:m,speed:i,phase:u,progress:f,hasComplete:s,finishT:r=0,fadeOpacity:o=1}){const c=d.useRef();return M(a=>{if(c.current){const l=a.clock.elapsedTime;c.current.position.x=n+Math.sin(l*i+u)*.8,c.current.position.z=t+Math.cos(l*i+u)*.8,c.current.position.y=h+Math.sin(l*i*2+u)*.15;const p=s?.15*(1-f):.15;c.current.material.opacity=(p*(1-r)+Math.sin(l+u)*.03*(1-r))*o}}),e.jsxs("mesh",{ref:c,position:[n,h,t],children:[e.jsx("sphereGeometry",{args:[m,8,8]}),e.jsx("meshStandardMaterial",{emissive:"#17202a",emissiveIntensity:.2,color:"#1f2a44",transparent:!0,opacity:.15*o})]})}function je({square:n,onComplete:t}){if(!n)return null;const[h,,m]=S(n),[i,u]=d.useState(0),{finishing:f,finishT:s,triggerFinish:r}=I(t,300);M((c,a)=>{u(l=>{const p=l+a*1.5;return p>=1&&(f||r()),Math.min(p,1)})});const o=(1-G(i))*(1-s);return e.jsxs("group",{position:[h,0,m],children:[[0,.15,.3].map((c,a)=>{const l=Math.max(0,Math.min(1,(i-c)/.7)),p=G(l)*1.5,x=(1-l)*.6;return e.jsxs("mesh",{position:[0,.3,0],rotation:[-Math.PI/2,0,0],scale:[p,p,1],children:[e.jsx("ringGeometry",{args:[.3,.4,32]}),e.jsx("meshStandardMaterial",{emissive:"#ffab91",emissiveIntensity:2,color:"#ffccbc",transparent:!0,opacity:x*(1-s),side:v})]},a)}),e.jsxs("mesh",{position:[0,.3,0],children:[e.jsx("sphereGeometry",{args:[.2*(1-i*.5),16,16]}),e.jsx("meshStandardMaterial",{emissive:"#ff8a65",emissiveIntensity:3*o,color:"#ffab91",transparent:!0,opacity:o*.5})]}),[...Array(8)].map((c,a)=>{const l=a/8*Math.PI*2,p=G(i)*1;return e.jsxs("mesh",{position:[Math.cos(l)*p,.3,Math.sin(l)*p],children:[e.jsx("sphereGeometry",{args:[.06*o,8,8]}),e.jsx("meshStandardMaterial",{emissive:"#ffccbc",emissiveIntensity:3,color:"#ffccbc",transparent:!0,opacity:o*.8})]},a)})]})}function ve({onComplete:n}){const[t,h]=d.useState(0),{finishing:m,finishT:i,triggerFinish:u}=I(n,350);return M((f,s)=>{h(r=>{const o=r+s*1.2;return o>=1&&(m||u()),Math.min(o,1)})}),e.jsxs("group",{children:[[...Array(20)].map((f,s)=>{const r=s%5*2-4,o=Math.floor(s/5)*2-3,c=s*.03,a=Math.max(0,Math.min(1,(t-c)/.6));return e.jsxs("mesh",{position:[r,.3,o+a*2],rotation:[Math.PI/2,0,0],children:[e.jsx("planeGeometry",{args:[.1,.8*a]}),e.jsx("meshStandardMaterial",{emissive:"#4dd0e1",emissiveIntensity:3*(1-a)*(1-i),color:"#80deea",transparent:!0,opacity:(1-a)*.7*(1-i),side:v})]},s)}),e.jsxs("mesh",{position:[0,.1,t*8-4],rotation:[-Math.PI/2,0,0],children:[e.jsx("planeGeometry",{args:[10,.5]}),e.jsx("meshStandardMaterial",{emissive:"#00bcd4",emissiveIntensity:4*(1-t)*(1-i),color:"#4dd0e1",transparent:!0,opacity:(1-t)*.5*(1-i),side:v})]})]})}function Ie({square:n,onComplete:t}){if(!n)return null;const[h,,m]=S(n),[i,u]=d.useState(0),f=d.useRef(),s=d.useMemo(()=>[[2,1],[2,-1],[-2,1],[-2,-1],[1,2],[1,-2],[-1,2],[-1,-2]],[]),{finishing:r,finishT:o,triggerFinish:c}=I(t,350);return M((a,l)=>{u(p=>{const x=p+l*1.5;return x>=1&&(r||c()),Math.min(x,1)}),f.current&&(f.current.rotation.y=a.clock.elapsedTime*2)}),e.jsxs("group",{position:[h,0,m],ref:f,children:[e.jsxs("mesh",{position:[0,.5,0],children:[e.jsx("sphereGeometry",{args:[.25*(1-i*.3)*(1-o*.3),16,16]}),e.jsx("meshStandardMaterial",{emissive:"#ce93d8",emissiveIntensity:3,color:"#e1bee7",transparent:!0,opacity:(1-i)*.6*(1-o)})]}),s.map(([a,l],p)=>{const x=p*.06,y=Math.max(0,Math.min(1,(i-x)/.7)),j=G(y);return e.jsxs("group",{children:[e.jsxs("mesh",{position:[a*.3*j,.4,l*.3*j],children:[e.jsx("sphereGeometry",{args:[.1*(1-y)*(1-o*.25),8,8]}),e.jsx("meshStandardMaterial",{emissive:"#ba68c8",emissiveIntensity:3*(1-y)*(1-o),color:"#ce93d8",transparent:!0,opacity:(1-y)*.7*(1-o)})]}),e.jsxs("mesh",{position:[a*.3,.4,l*.3],children:[e.jsx("sphereGeometry",{args:[.08*y*(1-o*.25),8,8]}),e.jsx("meshStandardMaterial",{emissive:"#e1bee7",emissiveIntensity:2,color:"#e1bee7",transparent:!0,opacity:y*.5*(1-i)*(1-o)})]})]},p)})]})}function Se({square:n,onComplete:t}){if(!n)return null;const[h,,m]=S(n),[i,u]=d.useState(0),{finishing:f,finishT:s,triggerFinish:r}=I(t,300);return M((o,c)=>{u(a=>{const l=a+c*1.2;return l>=1&&(f||r()),Math.min(l,1)})}),e.jsxs("group",{position:[h,0,m],children:[[...Array(8)].map((o,c)=>{const a=c*.12,l=Math.max(0,Math.min(1,(i-a)/.6)),p=.3+l*.3,x=(c-4)*.3;return e.jsxs("mesh",{position:[0,p,x],children:[e.jsx("boxGeometry",{args:[.3,.5*(1-l*.5),.15]}),e.jsx("meshStandardMaterial",{emissive:"#5c6bc0",emissiveIntensity:2*(1-l)*(1-s),color:"#7986cb",transparent:!0,opacity:(1-l)*.5*(1-s),wireframe:!0})]},c)}),e.jsxs("mesh",{position:[0,.5,0],children:[e.jsx("cylinderGeometry",{args:[.2,.3,.8,8]}),e.jsx("meshStandardMaterial",{emissive:"#7c4dff",emissiveIntensity:2*(1-i)*(1-s),color:"#b388ff",transparent:!0,opacity:(1-i)*.4*(1-s)})]})]})}function Pe({onComplete:n}){const[t,h]=d.useState(0),m=d.useRef(),{finishing:i,triggerFinish:u}=I(n,300);return M((f,s)=>{h(r=>{const o=r+s*1.5;return o>=1&&(i||u()),Math.min(o,1)}),m.current&&(m.current.rotation.y=f.clock.elapsedTime*2)}),e.jsxs("group",{ref:m,children:[[...Array(24)].map((f,s)=>{const r=s/24*Math.PI*2,o=t*2.5,c=Math.sin(t*Math.PI)*1.5;return e.jsxs("mesh",{position:[Math.cos(r)*o,.2+c*(.5+Math.random()*.5),Math.sin(r)*o],children:[e.jsx("sphereGeometry",{args:[.06*(1-t*.5),8,8]}),e.jsx("meshStandardMaterial",{emissive:"#76ff03",emissiveIntensity:3*(1-t),color:"#b2ff59",transparent:!0,opacity:(1-t)*.8})]},s)}),e.jsxs("mesh",{position:[0,.3,0],scale:[t*3,t*.5,t*3],children:[e.jsx("cylinderGeometry",{args:[1,1.2,.3,16,1,!0]}),e.jsx("meshStandardMaterial",{emissive:"#64dd17",emissiveIntensity:2*(1-t),color:"#76ff03",transparent:!0,opacity:(1-t)*.3,side:v})]})]})}function be({onComplete:n}){const[t,h]=d.useState(0),{finishing:m,finishT:i,triggerFinish:u}=I(n,400);return M((f,s)=>{h(r=>{const o=r+s*.8;return o>=1&&(m||u()),Math.min(o,1)})}),e.jsxs("group",{children:[[-3.5,-2.5,-1.5,-.5,.5,1.5,2.5,3.5].map((f,s)=>e.jsxs("mesh",{position:[f,G(t)*.4,-2.5],scale:[.8,G(t),.2],children:[e.jsx("boxGeometry",{args:[1,.8,1]}),e.jsx("meshStandardMaterial",{emissive:"#78909c",emissiveIntensity:1.5*(1-t*.5)*(1-i),color:"#90a4ae",transparent:!0,opacity:.7*(1-t*.3)*(1-i)})]},s)),e.jsxs("mesh",{position:[0,.3,-2.5],rotation:[-Math.PI/2,0,0],children:[e.jsx("planeGeometry",{args:[8,1]}),e.jsx("meshStandardMaterial",{emissive:"#b0bec5",emissiveIntensity:2*(1-t)*(1-i),color:"#cfd8dc",transparent:!0,opacity:(1-t)*.4*(1-i),side:v})]})]})}function Ge({onComplete:n}){const[t,h]=d.useState(0),m=d.useRef(),{finishing:i,finishT:u,triggerFinish:f}=I(n,400);return M((s,r)=>{h(o=>{const c=o+r*.6;return c>=1&&(i||f()),Math.min(c,1)}),m.current&&(m.current.rotation.y=s.clock.elapsedTime*(1-u*.3))}),e.jsxs("group",{ref:m,children:[e.jsxs("mesh",{position:[0,3,0],children:[e.jsx("cylinderGeometry",{args:[.1,2,6,32,1,!0]}),e.jsx("meshStandardMaterial",{emissive:"#fff9c4",emissiveIntensity:3*G(t),color:"#ffecb3",transparent:!0,opacity:.4*(1-t*.5),side:v})]}),[0,1,2].map(s=>e.jsxs("mesh",{position:[0,.5+s*.4,0],rotation:[-Math.PI/2,0,t*Math.PI*2],scale:[1-s*.2,1-s*.2,1],children:[e.jsx("ringGeometry",{args:[.4,.5,32]}),e.jsx("meshStandardMaterial",{emissive:"#ffd54f",emissiveIntensity:2,color:"#ffecb3",transparent:!0,opacity:.6*(1-t*.5),side:v})]},s)),[...Array(12)].map((s,r)=>{const o=r/12*Math.PI*2,c=r*.05,a=Math.max(0,Math.min(1,(t-c)/.8));return e.jsxs("mesh",{position:[Math.cos(o)*(.5+a*2),2-a*1.5,Math.sin(o)*(.5+a*2)],rotation:[0,-o,Math.PI/4],children:[e.jsx("planeGeometry",{args:[.1,.3]}),e.jsx("meshStandardMaterial",{emissive:"#ffffff",emissiveIntensity:3,color:"#ffffff",transparent:!0,opacity:(1-a)*.8,side:v})]},r)})]})}function Re({square:n,onComplete:t}){if(!n)return null;const[h,,m]=S(n),[i,u]=d.useState(0),{finishing:f,finishT:s,triggerFinish:r}=I(t,450);return M((o,c)=>{u(a=>{const l=a+c*2;return l>=1&&(f||r()),Math.min(l,1)})}),e.jsxs("group",{position:[h,0,m],children:[e.jsxs("mesh",{position:[0,.5,0],rotation:[0,Math.PI/4,0],scale:[1-s*.2,1-s*.2,1],children:[e.jsx("boxGeometry",{args:[.1,.8*G(i)*(1-s*.3),.02]}),e.jsx("meshStandardMaterial",{emissive:"#f44336",emissiveIntensity:4*(1-s),color:"#ff5252",transparent:!0,opacity:(1-i*.3)*(1-s)})]}),e.jsxs("mesh",{position:[0,.5,0],rotation:[0,-Math.PI/4,0],scale:[1-s*.2,1-s*.2,1],children:[e.jsx("boxGeometry",{args:[.1,.8*G(i)*(1-s*.3),.02]}),e.jsx("meshStandardMaterial",{emissive:"#f44336",emissiveIntensity:4*(1-s),color:"#ff5252",transparent:!0,opacity:(1-i*.3)*(1-s)})]}),[...Array(16)].map((o,c)=>{const a=c/16*Math.PI*2,l=i*1.5;return e.jsxs("mesh",{position:[Math.cos(a)*l,.5+Math.sin(i*Math.PI)*.5,Math.sin(a)*l],children:[e.jsx("boxGeometry",{args:[.08,.08,.08]}),e.jsx("meshStandardMaterial",{emissive:"#ff1744",emissiveIntensity:3*(1-i),color:"#ff5252",transparent:!0,opacity:(1-i)*.9})]},c)})]})}function Ee({onComplete:n}){const[t,h]=d.useState(0),{finishing:m,finishT:i,triggerFinish:u}=I(n,350);return M((f,s)=>{h(r=>{const o=r+s*.8;return o>=1&&(m||u()),Math.min(o,1)})}),e.jsxs("group",{children:[e.jsxs("mesh",{position:[0,2,0],rotation:[Math.PI/2,0,0],children:[e.jsx("ringGeometry",{args:[.8,1,32]}),e.jsx("meshStandardMaterial",{emissive:"#4fc3f7",emissiveIntensity:2*G(t),color:"#81d4fa",transparent:!0,opacity:.5*(1-t*.3),side:v})]}),[...Array(24)].map((f,s)=>{const r=s/24*Math.PI*2,o=G(t)*5,c=s*.02,a=Math.max(0,Math.min(1,(t-c)/.8));return e.jsxs("mesh",{position:[Math.cos(r)*o,.1,Math.sin(r)*o],rotation:[0,r,0],children:[e.jsx("coneGeometry",{args:[.1,.4*a,4]}),e.jsx("meshStandardMaterial",{emissive:"#e1f5fe",emissiveIntensity:2*(1-i),color:"#b3e5fc",transparent:!0,opacity:(1-t*.5)*.7*(1-i)})]},s)}),e.jsxs("mesh",{position:[0,.05,0],rotation:[-Math.PI/2,0,0],scale:[t*6,t*6,1],children:[e.jsx("circleGeometry",{args:[1,32]}),e.jsx("meshStandardMaterial",{emissive:"#4fc3f7",emissiveIntensity:1.5*(1-t),color:"#81d4fa",transparent:!0,opacity:(1-t)*.3})]})]})}function ze({onComplete:n}){const[t,h]=d.useState(0),{finishing:m,finishT:i,triggerFinish:u}=I(n,500);return M((f,s)=>{h(r=>{const o=r+s*.6;return o>=1&&(m||u()),Math.min(o,1)})}),e.jsxs("group",{children:[[...Array(12)].map((f,s)=>{const r=s/12*Math.PI*2-t*Math.PI*4,o=2+s*.3,c=Math.sin((t+s/12)*Math.PI)*2;return e.jsxs("mesh",{position:[Math.cos(r)*o,c,Math.sin(r)*o],children:[e.jsx("sphereGeometry",{args:[.15,8,8]}),e.jsx("meshStandardMaterial",{emissive:"#3498db",emissiveIntensity:2*(1-t*.5)*(1-i),color:"#64b5f6",transparent:!0,opacity:(1-t*.6)*.8*(1-i)})]},s)}),[...Array(16)].map((f,s)=>{const r=s/16*Math.PI*2+t*.5,o=G(t)*3;return e.jsxs("mesh",{position:[Math.cos(r)*o,.3+Math.sin(t*Math.PI+s)*.2,Math.sin(r)*o],children:[e.jsx("boxGeometry",{args:[.12,.12,.12]}),e.jsx("meshStandardMaterial",{emissive:"#1e88e5",emissiveIntensity:1.5*(1-t),color:"#42a5f5",transparent:!0,opacity:(1-t*.8)*.5})]},`trail-${s}`)}),e.jsxs("mesh",{position:[0,.02,0],rotation:[-Math.PI/2,0,0],scale:[t*8,t*8,1],children:[e.jsx("ringGeometry",{args:[t*3,t*3.2,32]}),e.jsx("meshStandardMaterial",{emissive:"#2196f3",emissiveIntensity:1.5*(1-t),color:"#64b5f6",transparent:!0,opacity:(1-t*.5)*.4})]}),e.jsxs("mesh",{position:[0,1,0],rotation:[0,t*Math.PI*2,0],children:[e.jsx("dodecahedronGeometry",{args:[2,2]}),e.jsx("meshStandardMaterial",{emissive:"#0d47a1",emissiveIntensity:.8*(1-t),color:"#1565c0",transparent:!0,opacity:(1-t*.7)*.3,wireframe:!0})]})]})}function Te({origin:n,chained:t,onComplete:h}){const[m,i]=d.useState(0),{finishing:u,finishT:f,triggerFinish:s}=I(h,300);M((o,c)=>{i(a=>{const l=a+c*2.5;return l>=1&&(u||s()),Math.min(l,1)})});const r=n?S(n):[0,0,0];return e.jsxs("group",{children:[e.jsxs("mesh",{position:[r[0],.5,r[2]],children:[e.jsx("sphereGeometry",{args:[.2*(1-m*.5),16,16]}),e.jsx("meshStandardMaterial",{emissive:"#ffeb3b",emissiveIntensity:5*(1-m),color:"#fff59d",transparent:!0,opacity:(1-m)*.9})]}),(t||[]).map((o,c)=>{const a=S(o),l=c*.1,p=Math.max(0,Math.min(1,(m-l)/.6));return e.jsxs("group",{children:[[...Array(5)].map((x,y)=>{const j=y/4,b=r[0]+(a[0]-r[0])*j*p,T=r[2]+(a[2]-r[2])*j*p,z=Math.sin(y*3+m*10)*.1;return e.jsxs("mesh",{position:[b+z,.5+Math.sin(j*Math.PI)*.3,T+z],children:[e.jsx("sphereGeometry",{args:[.08,8,8]}),e.jsx("meshStandardMaterial",{emissive:"#fff176",emissiveIntensity:4*(1-p*.5)*(1-f),color:"#ffeb3b",transparent:!0,opacity:(1-p)*.9*(1-f)})]},y)}),e.jsxs("mesh",{position:[a[0],.5,a[2]],children:[e.jsx("sphereGeometry",{args:[.15*p,12,12]}),e.jsx("meshStandardMaterial",{emissive:"#ffeb3b",emissiveIntensity:5*p*(1-m)*(1-f),color:"#fff59d",transparent:!0,opacity:p*(1-m)*.9*(1-f)})]})]},c)})]})}function Ae({shuffledSquares:n=[],onComplete:t}){const[h,m]=d.useState(0),i=d.useRef(),u=150,{finishing:f,finishT:s,triggerFinish:r}=I(t,600),o=d.useMemo(()=>[...Array(u)].map(()=>({theta:Math.random()*Math.PI*2,phi:Math.random()*Math.PI,speed:1+Math.random()*2,radius:3+Math.random()*3,offset:Math.random()*Math.PI*2,size:.03+Math.random()*.05,color:Math.random()>.5?"#9b59b6":"#8e44ad"})),[]);M((a,l)=>{m(p=>{const x=p+l/3;return x>=1?(f||r(),1):x}),i.current&&(i.current.rotation.y+=l*.8*(1-s*.5))});const c=(h<.1?h*10:h>.8?(1-h)*5:1)*(1-s);return e.jsxs("group",{ref:i,position:[0,2,0],children:[e.jsxs("mesh",{children:[e.jsx("torusGeometry",{args:[2,.1,16,100]}),e.jsx("meshStandardMaterial",{emissive:"#9b59b6",emissiveIntensity:3*(1-s),color:"#8e44ad",transparent:!0,opacity:c*.6})]}),o.map((a,l)=>{const p=h*a.speed+a.offset,x=a.radius*(1-Math.abs(h-.5)),y=Math.sin(a.phi)*Math.cos(a.theta+p*3)*x,j=Math.cos(a.phi)*x*.5+Math.sin(p*5)*.3,b=Math.sin(a.phi)*Math.sin(a.theta+p*3)*x;return e.jsxs("mesh",{position:[y,j,b],children:[e.jsx("sphereGeometry",{args:[a.size,8,8]}),e.jsx("meshStandardMaterial",{emissive:a.color,emissiveIntensity:2*(1-s),color:a.color,transparent:!0,opacity:c*.8})]},l)}),n.map((a,l)=>{const[p,,x]=S(a),y=l*.5,j=Math.sin(h*Math.PI*4+y)*.2+1;return e.jsxs("mesh",{position:[p,.1,x],scale:[j,1,j],children:[e.jsx("cylinderGeometry",{args:[.4,.4,.05,32]}),e.jsx("meshStandardMaterial",{emissive:"#9b59b6",emissiveIntensity:3*c,color:"#8e44ad",transparent:!0,opacity:c*.6})]},a)})]})}function Fe({onComplete:n}){return d.useEffect(()=>{if(n){const t=setTimeout(()=>n(),0);return()=>clearTimeout(t)}},[n]),null}function we({square:n,onComplete:t}){const[h,m]=d.useState(0),i=d.useRef(),[u,,f]=n?S(n):[0,0,0],{finishing:s,finishT:r,triggerFinish:o}=I(t,400);M((a,l)=>{m(p=>{const x=p+l/2;return x>=1?(s||o(),1):x}),i.current&&(i.current.rotation.y+=l*.5*(1-r*.5))});const c=(h<.1?h*10:h>.8?(1-h)*5:1)*(1-r);return e.jsxs("group",{position:[u,0,f],ref:i,children:[e.jsxs("mesh",{position:[0,.4,0],children:[e.jsx("sphereGeometry",{args:[.5,32,16,0,Math.PI*2,0,Math.PI/2]}),e.jsx("meshStandardMaterial",{emissive:"#ffd700",emissiveIntensity:2,color:"#ffeb3b",transparent:!0,opacity:c*.3,side:v})]}),e.jsxs("mesh",{position:[0,.05,0],rotation:[-Math.PI/2,0,0],children:[e.jsx("ringGeometry",{args:[.4,.5,32]}),e.jsx("meshStandardMaterial",{emissive:"#ffd700",emissiveIntensity:3,color:"#ffeb3b",transparent:!0,opacity:c*.6})]}),[...Array(12)].map((a,l)=>{const p=l/12*Math.PI*2,x=.35,y=(h+l*.1)%1;return e.jsxs("mesh",{position:[Math.cos(p)*x,y*.8,Math.sin(p)*x],children:[e.jsx("sphereGeometry",{args:[.02,8,8]}),e.jsx("meshStandardMaterial",{emissive:"#ffd700",emissiveIntensity:3,color:"#ffeb3b",transparent:!0,opacity:c*(1-y)})]},l)})]})}function ke({square:n,fadeOpacity:t=1}){const[h,,m]=n?S(n):[0,0,0],i=d.useRef(),u=d.useRef();return M(f=>{const s=f.clock.elapsedTime;i.current&&(i.current.material.opacity=(.3+Math.sin(s*2)*.15)*t),u.current&&(u.current.material.opacity=(.2+Math.sin(s*1.5)*.1)*t)}),e.jsxs("group",{position:[h,.12,m],children:[e.jsxs("mesh",{position:[0,-.1,0],rotation:[-Math.PI/2,0,0],ref:u,children:[e.jsx("circleGeometry",{args:[.48,32]}),e.jsx("meshStandardMaterial",{emissive:"#ffd700",emissiveIntensity:1.5,color:"#ffeb3b",transparent:!0,opacity:.25*t,side:v,depthWrite:!1})]}),e.jsxs("mesh",{ref:i,rotation:[-Math.PI/2,0,0],children:[e.jsx("ringGeometry",{args:[.35,.45,32]}),e.jsx("meshStandardMaterial",{emissive:"#ffd700",emissiveIntensity:2,color:"#ffeb3b",transparent:!0,opacity:.4*t,side:v,depthWrite:!1})]})]})}function _e({square:n,onComplete:t,fadeOpacity:h=1}){const[m,i]=d.useState(0),u=d.useRef(),{finishing:f,finishT:s,triggerFinish:r}=I(t,400),[o,,c]=n?S(n):[0,0,0];M((l,p)=>{i(x=>{const y=x+p/2;return y>=1?(f||r(),1):y}),u.current&&(u.current.rotation.y-=p*.8*(1-s*.5))});const a=(m<.1?m*10:m>.8?(1-m)*5:1)*(1-s)*h;return e.jsxs("group",{position:[o,0,c],ref:u,children:[e.jsxs("mesh",{position:[0,.1,0],rotation:[-Math.PI/2,0,0],children:[e.jsx("ringGeometry",{args:[.1,.45,32]}),e.jsx("meshStandardMaterial",{emissive:"#8b0000",emissiveIntensity:2,color:"#dc143c",transparent:!0,opacity:a*.5})]}),[...Array(20)].map((l,p)=>{const x=p/20*Math.PI*2,y=.3*Math.random()+.1,j=(m*2+p*.05)%1;return e.jsxs("mesh",{position:[Math.cos(x+m*3)*y,j*.6,Math.sin(x+m*3)*y],children:[e.jsx("sphereGeometry",{args:[.015,6,6]}),e.jsx("meshStandardMaterial",{emissive:"#8b0000",emissiveIntensity:2,color:"#dc143c",transparent:!0,opacity:a*(1-j)*.8})]},p)}),[...Array(4)].map((l,p)=>{const x=p/4*Math.PI*2+m*2;return e.jsxs("mesh",{position:[Math.cos(x)*.3,.2,Math.sin(x)*.3],children:[e.jsx("cylinderGeometry",{args:[.01,.02,.3,8]}),e.jsx("meshStandardMaterial",{emissive:"#8b0000",emissiveIntensity:2,color:"#dc143c",transparent:!0,opacity:a*.6})]},p)})]})}function Ce({square:n,turnsLeft:t,fadeOpacity:h=1}){const[m,,i]=n?S(n):[0,0,0],u=d.useRef(),f=d.useRef();return M(s=>{const r=s.clock.elapsedTime;u.current&&(u.current.rotation.z=r*.5,u.current.material.opacity=(.3+Math.sin(r*3)*.1)*h),f.current&&(f.current.material.opacity=(.25+Math.sin(r*2)*.1)*h)}),e.jsxs("group",{position:[m,.12,i],children:[e.jsxs("mesh",{position:[0,-.1,0],rotation:[-Math.PI/2,0,0],ref:f,children:[e.jsx("circleGeometry",{args:[.48,32]}),e.jsx("meshStandardMaterial",{emissive:"#8b0000",emissiveIntensity:1.2,color:"#dc143c",transparent:!0,opacity:.3*h,side:v,depthWrite:!1})]}),e.jsxs("mesh",{ref:u,rotation:[-Math.PI/2,0,0],children:[e.jsx("ringGeometry",{args:[.35,.42,6]}),e.jsx("meshStandardMaterial",{emissive:"#8b0000",emissiveIntensity:2,color:"#dc143c",transparent:!0,opacity:.4*h,side:v,depthWrite:!1})]})]})}export{Te as ChainLightningEffect,Ae as ChaosTheoryEffect,_e as CursedSquareEffect,Ce as CursedSquareIndicatorEffect,Ge as DivineInterventionEffect,Re as ExecutionEffect,ge as FogOfWarEffect,be as IronFortressEffect,ve as PawnRushEffect,Ie as PhantomStepEffect,Pe as PoisonTouchEffect,xe as PoisonedPieceEffect,we as SanctuaryEffect,ke as SanctuaryIndicatorEffect,de as ShieldGlowEffect,je as SoftPushEffect,Se as SpectralMarchEffect,Me as SquireSupportAnimationEffect,ye as SquireSupportEffect,Ee as TimeFreezeEffect,ze as TimeTravelEffect,Fe as VisionEffect};
